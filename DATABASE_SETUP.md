# Database Setup - Fully Portable Across All Environments

## Database Type: Supabase (Cloud PostgreSQL)

**Good News**: This app uses **Supabase**, which is a cloud-based PostgreSQL database. It works everywhere:

- ✅ Works in **Cursor**
- ✅ Works in **Bolt**
- ✅ Works in **any development environment**
- ✅ Works in **production deployments**

## Why Supabase is Portable

Supabase is NOT environment-specific. It's just a cloud database with API credentials stored in your `.env` file:

```env
VITE_SUPABASE_URL=https://xirntbejvbrxydhpjnxh.supabase.co
VITE_SUPABASE_ANON_KEY=eyJhbGc...
```

**These credentials work from anywhere**:
- Your local machine
- Cursor IDE
- Bolt.new
- Any server or hosting platform
- CI/CD pipelines

## Current Database Structure

### Tables Created

1. **templates**
   - Stores book template definitions
   - Currently has: "When {name} Grows Up" template

2. **template_pages**
   - Stores all 24 profession pages
   - Each page has: profession title, text template, image prompt template

3. **user_template_books**
   - Stores books generated by users
   - Saves: child info, photos, generated pages, PDF URLs

### Data Already Seeded

The database is **already populated** with:
- ✅ 1 template: "When {name} Grows Up"
- ✅ 24 profession pages (Astronaut, Doctor, Teacher, etc.)
- ✅ All text templates with placeholder syntax
- ✅ All AI image prompt templates

## Using in Different Environments

### In Cursor
1. Make sure `.env` file is in your project root
2. Run `pip install -r requirements.txt`
3. Run `streamlit run main.py`
4. Database connection works automatically

### In Bolt
1. `.env` file is already configured
2. Dependencies already installed
3. Run the app - it just works

### On Your Local Machine
1. Clone the project
2. Create `.env` file with the credentials shown above
3. Run `pip install -r requirements.txt`
4. Run `streamlit run main.py`

## No Changes Needed

**You don't need to change anything** about the database setup to use it in different environments. The same Supabase instance and credentials work everywhere.

## Database Migrations

All database schema is managed through Supabase migrations:
- `supabase/migrations/20251227072250_create_template_books_schema.sql`
- `supabase/migrations/20251227072612_update_template_rls_policies.sql`

These migrations have already been applied to your database.

## Adding More Templates

To add new book templates in the future:

1. Add template data to `template_data.py`
2. Update `seed_template_data.py` with new template
3. Run: `python seed_template_data.py`
4. Template becomes available in ALL environments automatically

## Security

- Database uses Row Level Security (RLS)
- Public read access for templates (they're reusable content)
- User books can be restricted to authenticated users (when auth is added)
- Anon key is safe to use in client-side code

## Verification

To verify your database is working:

```bash
python seed_template_data.py
```

Should output:
```
✅ Template data seeded successfully!
Template: When {name} Grows Up
Total Pages: 24
```

## Summary

✅ **Database**: Supabase (cloud PostgreSQL)
✅ **Portable**: Works in Cursor, Bolt, and anywhere else
✅ **Setup Required**: None - already configured
✅ **Data Status**: Already populated with 24-page template
✅ **Changes Needed**: Zero

The database is fully portable and ready to use across all your development environments!
